<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/template.xhtml">

	<ui:define name="title">Consulta Notas De Credito</ui:define>

	<ui:define name="content">
		<h:form id="form">
		
			<p:breadCrumb>
				<p:menuitem value="Home" outcome="/dashboard" />
				<p:menuitem value="Facturacion" />
				<p:menuitem value="Notas De Credito" />
				<p:menuitem value="Consulta"
					outcome="/protected/catalogos/consultaNotasCredito" />
			</p:breadCrumb>
			
			<p:growl id="messages" showDetail="true" />
			
			<div class="p-grid crud-demo" style="margin-top: 10px">
				<div class="p-col-12">
					<div class="card">
					
						<p:outputPanel id="filtro">
							<p:outputLabel value="Cliente:" styleClass="p-mr-2"/>					
							<p:selectOneMenu id="cliente" autoWidth="false" converter="entityConverter" value="#{consultaNotasCreditoBean.clienteSelect}">
								<f:selectItem itemLabel="---Seleccione---" noSelectionOption="true" />
								<f:selectItems value="#{consultaNotasCreditoBean.listaCliente}" var="cliente" itemLabel="#{cliente.cteNombre}" itemValue="#{cliente}"/>
							</p:selectOneMenu>
							
							<p:outputLabel value="Fecha Inicio:" styleClass="p-mr-2 p-ml-3" />
							<p:datePicker id="fechaInicio" value="#{consultaNotasCreditoBean.fechaInicio}" showIcon="true"/>
							
							<p:outputLabel value="Fecha Fin:" styleClass="p-mr-2 p-ml-3"/>
							<p:datePicker id="fechaFin" value="#{consultaNotasCreditoBean.fechaFin}" showIcon="true"/>
							
							<p:commandButton value="Consultar" styleClass="p-ml-4" actionListener="#{consultaNotasCreditoBean.consultarNotaCreditoCte}" process="filtro @this" />
							
						</p:outputPanel>
						
					</div>
				</div>
			</div>
			
			
			<div class="p-grid crud-demo" style="margin-top: 10px">
				<div class="p-col-12">
					<div class="card">
						<p:dataTable id="dt-notaCredito" value="#{consultaNotasCreditoBean.listaNotaCredito}" var="notaCredito" paginator="true" paginatorPosition="bottom" rows="10" >
						
						<f:facet name="header">
							<div>
								<span>Notas De Credito</span>
							</div>
						</f:facet>
						
						<p:column headerText="Nota">			
							<h:outputText value="#{notaCredito.numero}" />
						</p:column>
						
						<p:column headerText="Fecha">
							<h:outputText value="#{notaCredito.fecha}" />
						</p:column>
						
						<p:column headerText="Subtotal">
							<h:outputText value="#{notaCredito.subtotal}" />
						</p:column>
						
						<p:column headerText="IVA">
							<h:outputText value="#{notaCredito.iva}" />
						</p:column>
						
						<p:column headerText="Total" >
							<h:outputText value="#{notaCredito.total}" />
						</p:column>
						
						<p:column headerText="Cajero">
							<h:outputText value="#{notaCredito.cajero}" />
						</p:column>
						
						<p:column>
							<p:commandButton value="Detalle" oncomplete="PF('dlg-General').show()" update="form:dlg-notaCredito" process="@this" >
								<f:setPropertyActionListener value="#{notaCredito}" target="#{consultaNotasCreditoBean.notaCreditoSelect}"></f:setPropertyActionListener>
							</p:commandButton>
						</p:column>
						
						<p:column>
							<p:commandButton value="Facturas" oncomplete="PF('dlg-factura').show()" update="form:dlg-facturaNota" process="@this"> 
								<f:setPropertyActionListener value="#{notaCredito}" target="#{consultaNotasCreditoBean.notaCreditoSelect}"></f:setPropertyActionListener>
							</p:commandButton>
						</p:column>
						
						</p:dataTable>
					</div>
				</div>
			</div>			
			
			<p:dialog id="dlg-notaCredito" widgetVar="dlg-General" header="Informacion General" width="25em" height="40em">
				<p:outputPanel id="notaCredito" class="ui-fluid">
					<p:outputPanel rendered="#{not empty consultaNotasCreditoBean.notaCreditoSelect}">
					
						<p:outputLabel value="Numero:" />
						<p:inputText value="#{consultaNotasCreditoBean.notaCreditoSelect.numero}" />
						
						<p:outputLabel value="Cliente:" />
						<p:inputText value="#{consultaNotasCreditoBean.notaCreditoSelect.cliente}" />
						
						<p:outputLabel value="Domicilio:" />
						<p:inputText value="#{consultaNotasCreditoBean.notaCreditoSelect.domicilio}" />
						
						<p:outputLabel value="RFC:" />
						<p:inputText value="#{consultaNotasCreditoBean.notaCreditoSelect.rfc}" />
						
						<p:outputLabel value="SubTotal:"/>
						<p:inputText value="#{consultaNotasCreditoBean.notaCreditoSelect.subtotal}" />
						
						<p:outputLabel value="IVA:" />
						<p:inputText value="#{consultaNotasCreditoBean.notaCreditoSelect.iva}" />
						
						<p:outputLabel value="Total:" />
						<p:inputText value="#{consultaNotasCreditoBean.notaCreditoSelect.total}" />
						
						<p:outputLabel value="Servicios:" />
						<p:inputText value="#{consultaNotasCreditoBean.notaCreditoSelect.servicios}" />
						
						<p:outputLabel value="Constancia:" />
						<p:inputText value="#{consultaNotasCreditoBean.notaCreditoSelect.constancia}" />
						
						<p:outputLabel  value="Periodo:" />
						<p:inputText value="#{consultaNotasCreditoBean.notaCreditoSelect.periodo}" />
						
						<p:outputLabel value="Observaciones" />
						<p:inputText value="#{consultaNotasCreditoBean.notaCreditoSelect.observaciones}" />
						
						<p:outputLabel value="Cajero" />
						<p:inputText value="#{consultaNotasCreditoBean.notaCreditoSelect.cajero}" />
					
					</p:outputPanel>				
				</p:outputPanel>
				
				<f:facet name="footer">
					<p:commandButton value="Cancelar" onclick="PF('dlg-General').hide()" process="@this" />
				</f:facet>
											
			</p:dialog>
			
			<p:dialog id="dlg-facturaNota" widgetVar="dlg-factura" header="Detalle Nota Credito" style="max-width:80em !important;">
				<p:outputPanel id="factura" class="ui-fluid">
					<p:outputPanel rendered="#{not empty consultaNotasCreditoBean.notaCreditoSelect}">
				
						<p:dataTable id="dt-factura" value="#{consultaNotasCreditoBean.notaCreditoSelect.notaFacturaList}" var="factura" rowKey="#{factura.factura.id}" rows="5">
						
							<f:facet name="header">
								<div>
									<span>Facturas</span>
								</div>
							</f:facet>
						
							<p:column headerText="numero">
								<h:outputText value="#{factura.factura.numero}" />
							</p:column>
							
							<p:column headerText="Fecha">
								<h:outputText value="#{factura.factura.fecha}" />
							</p:column>
							
							<p:column headerText="Subtotal">
								<h:outputText value="#{factura.factura.subtotal}" />
							</p:column>
							
							<p:column headerText="IVA">
								<h:outputText value="#{factura.factura.iva}" />
							</p:column>
							
							<p:column headerText="Total">
								<h:outputText value="#{factura.factura.total}" />
							</p:column>
						
						</p:dataTable>
											
					</p:outputPanel>
				</p:outputPanel>
				
				<f:facet name="footer">
					<p:commandButton value="Cancelar" onclick="PF('dlg-factura').hide()" process="@this"></p:commandButton>
				</f:facet>
							
			</p:dialog>
			
			
		</h:form>
	</ui:define>
</ui:composition>