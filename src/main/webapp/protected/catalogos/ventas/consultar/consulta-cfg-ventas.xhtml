<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <p:panel id="pnl-config-venta" header="INFORMACIÃ“N DE LA CONSULTA DE LA VENTA" >
        <div class="p-grid ui-fluid">
            <div class="p-col-12 p-md-4">
                <p:outputLabel for="planta" value="Sucursal (Planta)" />
                <p:selectOneMenu id="planta" autoWidth="false" converter="entityConverter" value="#{consultaVentasBean.plantaSelected}" onchange="PF('statusInfoDialog').show();" >
                    <f:selectItem itemLabel="Selecciona una planta" noSelectionOption="true" />
                    <f:selectItems value="#{consultaVentasBean.listPlantas}" var="planta"  itemLabel="#{planta.plantaDs}"  itemValue="#{cliente}"  />
                    <p:ajax oncomplete="PF('statusInfoDialog').hide();" update="form:emisor" listener="#{consultaVentasBean.seleccionarEmisor()}" />
                </p:selectOneMenu>
            </div>
            <div class="p-col-12 p-md-4">
                <p:outputLabel for="emisor" value="Emisor" />
                <p:selectOneMenu id="emisor" autoWidth="false" converter="entityConverter" value="#{consultaVentasBean.emisoresCFDIS}" onchange="PF('statusInfoDialog').show();" >  
                    <f:selectItem itemLabel="Selecciona un emisor" noSelectionOption="true" />
                    <f:selectItems value="#{consultaVentasBean.listEmisores}" var="emisor" itemLabel="#{emisor.nb_emisor}" itemValue="#{emisor}" />
                    <p:ajax oncomplete="PF('statusInfoDialog').hide();" />
                </p:selectOneMenu>
            </div>
            <div class="p-col-12 p-md-4">
                <p:outputLabel for="cliente" value="Cliente" />
                <p:selectOneMenu id="cliente" autoWidth="false" converter="entityConverter" value="#{consultaVentasBean.clienteSelected}" onchange="PF('statusInfoDialog').show();" >
                    <f:selectItem itemLabel="Selecciona un cliente" noSelectionOption="true" />
                    <f:selectItems value="#{consultaVentasBean.listClientes}" var="cliente"  itemLabel="#{cliente.alias eq null or cliente.alias eq '' ? cliente.nombre : cliente.alias.concat(' - ').concat(cliente.nombre)}"  itemValue="#{cliente}"  />
                    <p:ajax oncomplete="PF('statusInfoDialog').hide();" />
                </p:selectOneMenu>
            </div>
        </div>
        <div class="p-grid ui-fluid">
            <div class="p-col-6 p-md-3">
                <div class="field">
                    <p:outputLabel for="@next" value="Periodo Inicio" />
                    <p:datePicker value="#{consultaVentasBean.fechaInicio}" showIcon="true" locale="es_MX" timeZone="GMT-6" pattern="dd/MM/yyyy" style="width:100%" >
                        <p:ajax process="@this" onstart="PF('statusInfoDialog').show();" oncomplete="PF('statusInfoDialog').hide();" />
                    </p:datePicker>
                </div>
            </div>
            <div class="p-col-6 p-md-3">
                <div class="field">
                    <p:outputLabel for="@next" value="Periodo Fin" />
                    <p:datePicker value="#{consultaVentasBean.fechaFin}" showIcon="true" locale="es_MX" timeZone="GMT-6" pattern="dd/MM/yyyy" style="width:100%" >
                        <p:ajax process="@this" onstart="PF('statusInfoDialog').show();" oncomplete="PF('statusInfoDialog').hide();" />
                    </p:datePicker>
                </div>
            </div>
        </div>
        <div class="p-grid ui-fluid">
            <div class="p-col-6 p-md-2">
                <p:commandButton value="Consultar" icon="pi pi-search" actionListener="#{consultaVentasBean.buscarVentas()}" 
                    update="form:dt-venta" onstart="PF('statusInfoDialog').show();" oncomplete="PF('statusInfoDialog').hide();" process="@this" />
            </div>
        </div>
    </p:panel>
</ui:composition>
