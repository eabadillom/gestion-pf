<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

	<ui:define name="title">Posiciones en cámara</ui:define>


	<ui:define name="content">
		<h:form id="form">
			<p:breadCrumb>
				<p:menuitem value="Home" outcome="/dashboard" />
				<p:menuitem value="Inventarios" />
				<p:menuitem value="Catálogos" />
				<p:menuitem value="Posiciones en cámara"
					outcome="/protected/catalogos/posicionesCamara" />
			</p:breadCrumb>

			<style type="text/css">
button.ui-button {
	margin-right: .5rem;
}
</style>



			<div class="p-grid">
				<div class="">
					<div class="card">
						<p:growl id="messages" showDetail="true" />
						<div class="">
							<div class="">
								<span style="font-weight: bold">CONSULTA DE POSICIONES</span>
							</div>


							<p:toolbar styleClass="" id="busqueda">
								<div class="card">
									<div class="">

										<p:toolbarGroup>

											<div>

												<p:outputLabel for="@next" value="PLANTA: " />
												<p:selectOneMenu id="planta" converter="entityConverter"
													value="#{posicionCamaraBean.plantaSelect}">
													<f:selectItem
														itemLabel="TODAS LAS PLANTAS (Seleccione una planta)" />
													<f:selectItems value="#{posicionCamaraBean.plantas}"
														var="plantas" itemLabel="#{plantas.plantaDs}"
														itemValue="#{plantas}" />
													<p:ajax listener="#{posicionCamaraBean.filtraListado()}" update="form:busqueda" />
												</p:selectOneMenu>

											</div>
										</p:toolbarGroup>
										<p:toolbarGroup>
											<div class="">

												<p:outputLabel for="@next" value="CAMARA: " />
												<p:selectOneMenu id="camara" converter="entityConverter"
													value="#{posicionCamaraBean.camaraSelect}">
													<f:selectItem itemLabel="" />
													<f:selectItems
														value="#{posicionCamaraBean.camaraPorPlanta}"
														var="camaraPlanta" itemLabel="#{camaraPlanta.camaraDs}"
														itemValue="#{camaraPlanta}" />
													<p:ajax
														listener="#{posicionCamaraBean.filtrarPosiciones()}" />
												</p:selectOneMenu>

											</div>
										</p:toolbarGroup>
										<p:toolbarGroup align="right ">
											<div class="">

												<p:commandButton icon="pi pi-search" process="@this"
													styleClass="ui-button-raised ui-button-primary ui-button-flat "
													value="Buscar Posiciones" update="dt-posiciones" />

												<p:commandButton value="Agregar" icon="pi pi-plus"
													styleClass="ui-button-success"
													actionListener="#{posicionCamaraBean.openNew()}"
													oncomplete="PF('dg-agrega').show();" update="frm-agrega"
													process="@this" />

											</div>
										</p:toolbarGroup>
									</div>
								</div>
							</p:toolbar>

						</div>
						<p:dataTable id="dt-posiciones" widgetVar="dtposiciones"
							value="#{posicionCamaraBean.listaPosiciones}" var="posiciones"
							reflow="true" lazy="true" paginator="true" rows="10"
							rowSelectMode="add" paginatorPosition="bottom">

							<f:facet name="header">
								<div class="posicionCamara-table-header"></div>
							</f:facet>

							<p:column headerText="Planta">
								<h:outputText value="#{posiciones.planta.plantaCve}" />
							</p:column>
							<p:column headerText="Camara">
								<h:outputText value="#{posiciones.camara.camaraCve}" />
							</p:column>
							<p:column headerText="Clave Posicion">
								<h:outputText value="#{posiciones.codPosicion}" />
							</p:column>
							<p:column headerText="Descripción">
								<h:outputText value="#{posiciones.descPosicion}" />
							</p:column>
							<p:column headerText="Temp. Min.°C">
								<h:outputText value="#{posiciones.tempIni}" />
							</p:column>
							<p:column headerText="Temp. Max.°C">
								<h:outputText value="#{posiciones.tempFin}" />
							</p:column>
							<p:column headerText="Status">
								<p:selectBooleanCheckbox value="#{posiciones.habilitada ? true: false}">
								<p:ajax listener="#{posicionCamaraBean.checkHabilitada()}" />
								</p:selectBooleanCheckbox>
								
							</p:column>

						</p:dataTable>
					</div>
				</div>

			</div>

			<p:dialog header="Agregar una posicion a una cámara"
				widgetVar="dg-agrega" modal="true" showEffect="fade"
				responsive="true">

				<p:outputPanel id="frm-agrega" class="ui-fluid">

					<div class="p-field">
						<p:outputLabel for="@next" value="PLANTA: " />
						<p:selectOneMenu id="plantaAgregar" converter="entityConverter"
							value="#{posicionCamaraBean.nuevaPosicion.planta}">
							<f:selectItem
								itemLabel=""/>
							<f:selectItems value="#{posicionCamaraBean.plantas}"
								var="plantas" itemLabel="#{plantas.plantaDs}" itemValue="#{plantas}"/>
								<p:ajax listener="#{posicionCamaraBean.filtrarAgregar()}" update="frm-agrega"/>
						</p:selectOneMenu>
					</div>
					<div class="p-field">
						<p:outputLabel for="@next" value="CAMARA: " />
						<p:selectOneMenu id="camaraAgregar" converter="entityConverter"
							value="#{posicionCamaraBean.nuevaPosicion.camara}">
							<f:selectItem itemLabel="" />
							<f:selectItems value="#{posicionCamaraBean.camaraPorPlantaAgregar}"
								var="camaraPlanta" itemLabel="#{camaraPlanta.camaraDs}"
								itemValue="#{camaraPlanta}" />
						</p:selectOneMenu>
					</div>

					<div class="p-field">
						<p:outputLabel for="@next">Clave:</p:outputLabel>
						<p:inputText
							value="#{posicionCamaraBean.nuevaPosicion.codPosicion}"></p:inputText>
					</div>


					<div class="p-field">
						<p:outputLabel for="@next">Descripción:</p:outputLabel>
						<p:inputText
							value="#{posicionCamaraBean.nuevaPosicion.descPosicion}"></p:inputText>
					</div>

					<div class="p-text-left p-mb-2 p-text-bold">Rango de
						Temperaturas</div>

					<div class="p-field">
						<p:outputLabel for="@next">°C (min):</p:outputLabel>
						<p:inputText value="#{posicionCamaraBean.nuevaPosicion.tempIni}"></p:inputText>
					</div>
					<div class="p-field">
						<p:outputLabel for="@next">°C(Max):</p:outputLabel>
						<p:inputText value="#{posicionCamaraBean.nuevaPosicion.tempFin}"></p:inputText>
					</div>
					<div class="p-field">
						<p:outputLabel for="@next">habilitado:</p:outputLabel>
						<p:selectBooleanCheckbox value="#{posicionCamaraBean.nuevaPosicion.habilitada}"></p:selectBooleanCheckbox>
					</div>


				</p:outputPanel>

				<f:facet name="footer">
					<p:commandButton value="Agregar" icon="pi pi-check"
						actionListener="#{posicionCamaraBean.save()}" update="dt-posiciones"
						process="frm-agrega @this" />
					<p:commandButton value="Cancelar" icon="pi pi-times"
						class="ui-button-secondary" oncomplete="PF('dg-agrega').hide()" />
				</f:facet>

			</p:dialog>



		</h:form>
	</ui:define>


</ui:composition>